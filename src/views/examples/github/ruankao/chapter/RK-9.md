# 数据库技术基础

## 1、三级模式 - 两级映射

1. 物理数据库
2. 内模式：对数据的存放
3. 概念模式：把数据分成若干成表
4. 外模式：视图

<br>

1. 概念模式-内模式映射
2. 外模式-概念模式映射

## 2、数据库设计过程

1. 需求分析：数据流图、数据字典、需求说明书
2. 概念结构设计：ER模型、转换规则、规范化理论
3. 逻辑结构设计：关系模式
4. 物理设计：DBMS特性、硬件，OS特性

## 3、ER模型
>先绘制局部ER图、在集成在一起
- 矩形：实体
- 菱形：联系
- 椭圆：属性

一个实体转换为一个关系模式

关系模式：1:1、1:n、m:n

> 1:1：最少可转换1个关系模式<br>
> 1:n：最少可转换2个关系模式<br>
> m:n：最少可转换3个关系模式<br>

## 4、关系代数

- 并：将多张表合并到一起、会去重
- 交：只显示多张表的公共数据、会去重
- 差：去除主表的公共数据、显示主表的其余数据
- 笛卡尔积(x)
  - 属性数：参与操作的关系的属性数之和
  - 记录数：两个记录数之积
- 投影(π)：选列操作、会去重
- 选择(σ)：选行操作
- 联接(∞)：连接后会去重

## 5、规范化理论 - 函数依赖

- 部分函数依赖
- 传递函数依赖

## 6、规范化理论 - 价值与用途
非规范化的关系模式，可能存在的问题包括：数据冗余、更新异常、插入异常、删除异常

## 7、规范化理论 - 键

1. 超键：唯一标识元组、可能存在冗余属性
2. 候选键：可以有多个、不存在冗余属性
3. 主键：只能有一个

- 外键：其他关系的主键

## 8、规范化理论 - 求候选键
1. 有向图
2. **找出入度为0的节点**，遍历整个节点，如能遍历全部节点，则为候选键
3. 若没有 入度为0的节点，**则找出既有入度、也有出度的节点**，遍历整个节点，如能遍历全部节点，则为候选键

> 节点箭头指向外(—>)：入度<br>
> 节点箭头指向内(<—)：出度

## 9、规范化理论 - 范式
插入异常、删除异常、数据冗余；逐步优化

- 第一范式(1NF)：属性值都是不可分的原子值、每个分量都是不可再分的数据项
- 第二范式(2NF)：消除非主属性选键的部分依赖
- 第三范式(3NF)：消除非主属性对候选键的传递依赖
- BC范式：消除主属性对候选键的传递依赖

> 主属性：是候选键的属性<br>
> 非主属性：不是候选键的属性<br>
> 部分依赖：非主属性完全依赖于主键；主键为单属性时不可能出现部分依赖<br>
> 传递依赖：单方面传递查询、不能互查

## 10、规范化理论 - 模式分解

- 保持函数依赖分解：把原关系模式的函数依赖、继续保持在拆分出来的关系模式中。
- 有损 或 无损分解